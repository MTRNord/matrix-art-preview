var b=Object.defineProperty;var c=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var d=(s,t,e)=>t in s?b(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,h=(s,t)=>{for(var e in t||(t={}))m.call(t,e)&&d(s,e,t[e]);if(c)for(var e of c(t))x.call(t,e)&&d(s,e,t[e]);return s};import{u as w,E as v}from"./vendor.09079154.js";import{j as r,a as n,H as y,C as k}from"./index.955c971f.js";const I=s=>t=>{const e=w();return r(s,h({navigate:e},t))},u="inline-block p-4 w-full text-gray-900 bg-gray-100 hover:ring-blue-300 hover:ring-1 focus:ring-transparent focus:outline-none dark:bg-gray-700 dark:text-white",g="inline-block p-4 w-full bg-white hover:text-gray-700 hover:bg-gray-50 hover:ring-blue-300 hover:ring-1 focus:ring-transparent focus:outline-none dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700";class p extends v{constructor(t){super(t);this.state={homeserver:"https://art.midnightthoughts.space",username:"",password:"",create_profile:!0,current_tab:"login"}}async onSubmit(t){t.preventDefault();const e=this.context;!e||this.state.homeserver===""||this.state.username===""||this.state.password===""||(this.state.current_tab==="login"&&!(e!=null&&e.isLoggedIn())?await e.login(this.state.homeserver,this.state.username,this.state.password,this.state.create_profile):this.state.current_tab==="register"&&!e.isLoggedIn()&&await e.register(this.state.homeserver,this.state.username,this.state.password,this.state.create_profile),this.props.navigate("/",{replace:!0}))}onInput(t){t.preventDefault();const e=t.target,a=e.type==="checkbox"?e.checked:e.value,o=e.name;this.setState({[o]:a})}render(t,{homeserver:e,username:a,password:o,create_profile:f,current_tab:i}){return n("div",{class:"flex flex-col",children:[r("header",{children:r(y,{})}),n("main",{class:"m-12 mt-6",children:[r("h1",{class:"text-3xl font-bold mb-4 text-white",children:"Join"}),n("div",{class:"flex items-center flex-col",children:[n("ul",{class:"w-1/4 mb-8 hidden text-sm font-medium text-center text-gray-500 rounded-lg divide-x divide-gray-200 shadow sm:flex dark:divide-gray-700 dark:text-gray-400",children:[r("li",{class:"w-full",children:r("a",{href:"#",class:i==="login"?`${u} rounded-l-lg`:`${g} rounded-l-lg`,onClick:l=>{l.preventDefault(),this.setState({current_tab:"login"})},children:"Login"})}),r("li",{class:"w-full",children:r("a",{href:"#",class:i==="register"?`${u} rounded-r-lg`:`${g} rounded-r-lg`,onClick:l=>{l.preventDefault(),this.setState({current_tab:"register"})},children:"Register"})})]}),n("form",{onSubmit:this.onSubmit.bind(this),class:"flex flex-col items-start w-1/4",children:[r("input",{class:"search-bg shadow rounded-lg border-0 py-3 px-4 placeholder-data text-white mb-4 w-full",type:"url",placeholder:"Homeserver",name:"homeserver",value:e,onInput:this.onInput.bind(this)}),r("input",{class:"search-bg shadow rounded-lg border-0 py-3 px-4 placeholder-data text-white mb-4 w-full",autocomplete:"username",type:"text",placeholder:"Username",name:"username",value:a,onInput:this.onInput.bind(this)}),r("input",{class:"search-bg shadow rounded-lg border-0 py-3 px-4 placeholder-data text-white mb-4 w-full",autoComplete:"current-password",type:"password",placeholder:"Password",name:"password",value:o,onInput:this.onInput.bind(this)}),n("label",{class:"mb-4 flex items-center",children:[r("input",{class:"checked:bg-blue-600 checked:border-transparent checked:bg-no-repeat checked:bg-[url('/tick.svg')] outline-none focus:outline-offset-2  focus:ring-blue-600  focus:ring-offset-2  focus:ring-offset-white p-0 inline-block align-middle box-border select-none shrink-0 shadow h-5 w-5 appearance-none rounded bg-white border-none",type:"checkbox",name:"create_profile",checked:f,onInput:this.onInput.bind(this)}),r("span",{class:"ml-4 text-data text-base font-medium",children:"Create account"})]}),r("button",{type:"submit",class:"text-white font-bold text-lg logo-bg rounded-xl py-2 px-10 shadow transform transition-transform ease-in-out duration-300 hover:scale-105 w-1/2 self-center",children:i==="login"?"Login":"Register"})]})]})]})]})}}p.contextType=k;var $=I(p);export{$ as default};
